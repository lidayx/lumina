# 应用图标设置教程

## 快速开始

### 方法 1：使用自动生成脚本（推荐）

1. **准备图标文件**
   - 将你的图标保存为 `build/icon.png`（建议 512x512 像素）
   - 支持 PNG 格式

2. **运行生成脚本**
   ```bash
   npm run generate:icon
   ```
   
   脚本会自动生成：
   - `build/icon.icns` - macOS 图标
   - `build/icon.ico` - Windows 图标
   - `build/icon.png` - Linux 图标（直接使用你的文件）

3. **重新构建应用**
   ```bash
   npm run build:mac    # macOS
   npm run build:win    # Windows
   npm run build:linux  # Linux
   ```

### 方法 2：手动转换图标

#### macOS (.icns)

1. 创建图标集：
   ```bash
   mkdir -p build/mac.iconset
   ```

2. 生成不同尺寸：
   ```bash
   sips -z 16 16   build/icon.png --out build/mac.iconset/icon_16x16.png
   sips -z 32 32   build/icon.png --out build/mac.iconset/icon_16x16@2x.png
   sips -z 32 32   build/icon.png --out build/mac.iconset/icon_32x32.png
   sips -z 64 64   build/icon.png --out build/mac.iconset/icon_32x32@2x.png
   sips -z 128 128 build/icon.png --out build/mac.iconset/icon_128x128.png
   sips -z 256 256 build/icon.png --out build/mac.iconset/icon_128x128@2x.png
   sips -z 256 256 build/icon.png --out build/mac.iconset/icon_256x256.png
   sips -z 512 512 build/icon.png --out build/mac.iconset/icon_256x256@2x.png
   sips -z 512 512 build/icon.png --out build/mac.iconset/icon_512x512.png
   ```

3. 生成 .icns：
   ```bash
   iconutil -c icns build/mac.iconset --output build/icon.icns
   ```

#### Windows (.ico)

使用 ImageMagick：
```bash
magick convert build/icon.png -define icon:auto-resize=256,128,64,48,32,16 build/icon.ico
```

或使用在线工具：
- [ConvertICO](https://convertico.com/)
- [ICO Convert](https://icoconvert.com/)

#### Linux (.png)

直接使用 512x512 的 PNG 文件即可。

## 配置说明

图标配置在 `electron-builder.yml` 中：

```yaml
mac:
  icon: build/icon.icns  # macOS 图标

win:
  icon: build/icon.ico   # Windows 图标

linux:
  icon: build/icon.png   # Linux 图标
```

## 图标要求

### macOS
- 文件格式：`.icns`
- 推荐尺寸：512x512（会自动包含多种尺寸）
- 多尺寸支持：16x16, 32x32, 128x128, 256x256, 512x512 及其 2x 版本

### Windows
- 文件格式：`.ico`
- 推荐尺寸：256x256 或 128x128
- 多尺寸支持：16x16, 32x32, 48x48, 64x64, 128x128, 256x256

### Linux
- 文件格式：`.png`
- 推荐尺寸：512x512

## 开发模式

开发模式下，图标会自动从 `build/` 目录加载。如果未找到，会使用默认的 Electron 图标。

### 开发模式图标位置

代码在 `src/main/windows/windowManager.ts` 中会自动查找：
1. 打包后的资源目录
2. `build/` 目录（开发环境）

## 常见问题

### Q: 图标在开发模式下不显示？

A: 确保 `build/icon.icns`（macOS）或 `build/icon.ico`（Windows）存在。

### Q: 如何更新图标？

A: 替换 `build/icon.png` 文件，然后运行 `npm run generate:icon`。

### Q: 需要更新代码吗？

A: 不需要！代码已经自动检测图标文件。

## 状态栏和程序坞图标

设置好图标后，会自动显示在：
- **macOS**: 程序坞、状态栏、应用切换器
- **Windows**: 任务栏、系统托盘
- **Linux**: 应用菜单、系统托盘

## 示例

```bash
# 1. 准备图标（从任何设计工具导出 512x512 PNG）
cp /path/to/my-icon.png build/icon.png

# 2. 生成所有平台的图标
npm run generate:icon

# 3. 构建应用
npm run build:mac
```

## 工具推荐

- **设计**: Figma, Sketch, Adobe Illustrator
- **转换**: iconutil (macOS), ImageMagick
- **在线工具**: [CloudConvert](https://cloudconvert.com/), [ConvertICO](https://convertico.com/)

## 注意事项

1. 图标设计要简洁清晰，在小尺寸下也要清晰可辨
2. 避免过多细节，在 16x16 尺寸下可能会变得模糊
3. 使用高对比度，确保在任何背景下都可见
4. 遵循各平台的图标设计指南

